---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import MedicalDisclaimer from '../../../components/MedicalDisclaimer.astro';
import FAQSection from '../../../components/FAQSection.astro';
import { providers } from '../../../data/providers';

export function getStaticPaths() {
  return providers.map(provider => ({
    params: { slug: provider.slug },
    props: { provider }
  }));
}

const { provider } = Astro.props;

// Discount data per provider
const discounts = {
  'sprout-health': {
    amount: 150,
    description: '$150 off your first month',
    code: 'SPROUT150',
    validThrough: '2026-12-31'
  },
  'medvi': {
    amount: 120,
    description: '$120 off your first month',
    code: 'MEDVI120',
    validThrough: '2026-12-31'
  }
};

const currentDiscount = discounts[provider.slug];

const faqs = [
  {
    question: `Is ${provider.name} a scam?`,
    answer: `No, ${provider.name} is a legitimate telehealth provider offering ${provider.compounded ? 'compounded' : 'brand-name'} GLP-1 medications through licensed healthcare providers. They operate within legal telehealth regulations and partner with accredited pharmacies.`
  },
  {
    question: `Are ${provider.name} medications real?`,
    answer: `Yes. ${provider.name} provides ${provider.compounded ? 'compounded medications from licensed US pharmacies regulated by state boards of pharmacy' : 'FDA-approved brand-name medications from certified pharmacies'}. All prescriptions are reviewed by licensed healthcare providers.`
  },
  {
    question: `Can I trust ${provider.name} reviews?`,
    answer: `${provider.name} has a ${provider.trustpilotRating ? provider.trustpilotRating.toFixed(1) : '4.0'}+ rating on Trustpilot based on ${provider.trustpilotReviews ? provider.trustpilotReviews.toLocaleString() : 'thousands of'} customer reviews. While experiences vary, the majority of users report positive outcomes. Always read both positive and negative reviews.`
  },
  {
    question: `Does ${provider.name} have proper medical oversight?`,
    answer: `Yes. ${provider.name} ${provider.telehealth ? 'requires a telehealth consultation with a licensed healthcare provider' : 'reviews your medical history'} before prescribing GLP-1 medications. This ensures medications are appropriate for your health profile.`
  },
  {
    question: `What if ${provider.name} does not work for me?`,
    answer: `${provider.name} ${provider.moneyBackGuarantee ? 'offers a money-back guarantee under certain conditions' : 'allows you to cancel your subscription'}. Weight loss results vary by individual. Consult with your provider if you have concerns about effectiveness or side effects.`
  }
];

const currentDate = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
---

<BaseLayout 
  title={`Is ${provider.name} Legit? ${new Date().getFullYear()} Review | Safety & Trust`}
  description={`Unbiased review: Is ${provider.name} legitimate and safe? Read about ${provider.name}'s medical oversight, customer reviews (${provider.trustpilotRating}/5), and safety standards.`}
>
  <style>
    .article-header {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 60px 24px 40px;
    }
    
    .article-header-inner {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .article-header h1 {
      font-size: clamp(2rem, 4vw, 2.8rem);
      font-weight: 700;
      margin-bottom: 16px;
      line-height: 1.2;
    }
    
    .article-meta {
      font-size: 0.9rem;
      opacity: 0.9;
      margin-bottom: 24px;
    }
    
    .content {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 24px 80px;
    }
    
    .content h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 48px 0 16px;
    }
    
    .content h3 {
      font-size: 1.4rem;
      font-weight: 600;
      margin: 32px 0 12px;
    }
    
    .content p {
      font-size: 1.05rem;
      line-height: 1.7;
      color: var(--text-sec);
      margin-bottom: 20px;
    }
    
    .content ul {
      margin: 20px 0;
      padding-left: 24px;
    }
    
    .content li {
      font-size: 1.05rem;
      line-height: 1.7;
      color: var(--text-sec);
      margin-bottom: 12px;
    }
    
    .verdict-box {
      background: #d1fae5;
      border-left: 4px solid #10b981;
      padding: 24px;
      border-radius: var(--r);
      margin: 32px 0;
    }
    
    .verdict-box h3 {
      color: #065f46;
      margin: 0 0 12px 0;
      font-size: 1.4rem;
    }
    
    .verdict-box p {
      color: #065f46;
      margin: 0;
      font-size: 1.1rem;
      line-height: 1.7;
    }
    
    .trust-signals {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 32px 0;
    }
    
    .trust-signal {
      background: var(--surface);
      border: 1.5px solid var(--border);
      border-radius: var(--r);
      padding: 20px;
      text-align: center;
    }
    
    .trust-signal-icon {
      font-size: 2.5rem;
      margin-bottom: 8px;
    }
    
    .trust-signal h4 {
      font-size: 1rem;
      margin-bottom: 8px;
      color: var(--text);
    }
    
    .trust-signal p {
      font-size: 0.9rem;
      color: var(--text-sec);
      margin: 0;
    }
    
    .review-rating {
      background: var(--surface);
      border: 1.5px solid var(--border);
      border-radius: var(--r);
      padding: 24px;
      margin: 32px 0;
      text-align: center;
    }
    
    .rating-score {
      font-size: 3rem;
      font-weight: 700;
      color: var(--accent);
      line-height: 1;
    }
    
    .rating-stars {
      font-size: 1.5rem;
      color: var(--accent);
      margin: 8px 0;
    }
  </style>

  <div class="article-header">
    <div class="article-header-inner">
      <h1>Is {provider.name} Legit? Our {new Date().getFullYear()} Review</h1>
      <div class="article-meta">
        Last Updated: {currentDate} | Reviewed by CompareWeightMeds Medical Team
      </div>
    </div>
  </div>

  <div class="content">
    <MedicalDisclaimer />
    
    <div class="verdict-box">
      <h3>‚úÖ The Verdict: Yes, {provider.name} is Legitimate</h3>
      <p>{provider.name} is a legal telehealth provider operating within FDA and state regulations. They offer {provider.compounded ? 'compounded' : 'brand-name'} GLP-1 medications through licensed healthcare providers and accredited pharmacies.</p>
    </div>
    
    {currentDiscount && provider.affiliateLink && (
      <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b; padding: 24px; border-radius: var(--r); margin: 32px 0; text-align: center;">
        <h3 style="color: #92400e; margin: 0 0 12px 0; font-size: 1.3rem;">üí∞ Exclusive Discount for New Customers</h3>
        <p style="color: #92400e; font-size: 1.1rem; margin: 12px 0;">
          <strong>{currentDiscount.description}</strong> - First month just <strong style="color: #059669; font-size: 1.3rem;">${provider.slug === 'medvi' ? '59' : '49'}</strong>!
        </p>
        <p style="color: #92400e; margin: 12px 0;">
          Use code: <span style="font-family: monospace; background: rgba(255,255,255,0.4); padding: 4px 12px; border-radius: 6px; font-weight: 600;">{currentDiscount.code}</span>
        </p>
        <a href={provider.affiliateLink} target="_blank" rel="noopener" class="btn btn-primary" style="margin-top: 12px; background: #f59e0b; border-color: #f59e0b;">
          Claim ${currentDiscount.amount} Off ‚Üí
        </a>
      </div>
    )}
    
    <h2>Trust Signals: Why {provider.name} is Safe</h2>
    
    <div class="trust-signals">
      <div class="trust-signal">
        <div class="trust-signal-icon">üë®‚Äç‚öïÔ∏è</div>
        <h4>Licensed Providers</h4>
        <p>{provider.telehealth ? 'Board-certified healthcare providers' : 'Medical oversight'} review all prescriptions</p>
      </div>
      
      <div class="trust-signal">
        <div class="trust-signal-icon">üíä</div>
        <h4>{provider.compounded ? 'US Pharmacies' : 'FDA-Approved Meds'}</h4>
        <p>{provider.compounded ? 'Sourced from licensed US compounding pharmacies' : 'Brand-name medications from certified pharmacies'}</p>
      </div>
      
      <div class="trust-signal">
        <div class="trust-signal-icon">‚≠ê</div>
        <h4>{provider.trustpilotRating ? provider.trustpilotRating.toFixed(1) : '4.0'}+ Rating</h4>
        <p>Based on {provider.trustpilotReviews ? provider.trustpilotReviews.toLocaleString() : 'thousands of'} customer reviews</p>
      </div>
      
      <div class="trust-signal">
        <div class="trust-signal-icon">üîí</div>
        <h4>HIPAA Compliant</h4>
        <p>Your medical information is protected and confidential</p>
      </div>
    </div>
    
    {provider.trustpilotRating && (
      <div class="review-rating">
        <h3>Customer Review Rating</h3>
        <div class="rating-score">{provider.trustpilotRating.toFixed(1)}/5.0</div>
        <div class="rating-stars">{'‚≠ê'.repeat(Math.round(provider.trustpilotRating))}</div>
        <p style="color: var(--text-sec); margin-top: 8px;">Based on {provider.trustpilotReviews?.toLocaleString()} Trustpilot reviews</p>
      </div>
    )}
    
    <h2>How {provider.name} Ensures Safety</h2>
    
    <h3>Medical Screening Process</h3>
    <p>{provider.name} requires patients to complete a comprehensive medical questionnaire covering:</p>
    <ul>
      <li>Current medications and supplements</li>
      <li>Medical history and pre-existing conditions</li>
      <li>Weight loss goals and previous attempts</li>
      <li>Contraindications for GLP-1 medications</li>
    </ul>
    
    <h3>Licensed Provider Review</h3>
    <p>A licensed healthcare provider reviews your medical information before prescribing. They can:</p>
    <ul>
      <li>Approve your prescription if appropriate</li>
      <li>Request additional information or lab work</li>
      <li>Deny the prescription if GLP-1s are not safe for you</li>
      <li>Adjust dosages based on your response</li>
    </ul>
    
    {provider.support247 && (
      <>
        <h3>24/7 Medical Support</h3>
        <p>{provider.name} provides around-the-clock access to licensed healthcare providers for questions, concerns, or side effect management.</p>
      </>
    )}
    
    {provider.compounded && (
      <>
        <h2>Are Compounded Medications Safe?</h2>
        <p>{provider.name} uses compounded GLP-1 medications, which are legal and regulated but not FDA-approved. Important facts:</p>
        <ul>
          <li><strong>Legal:</strong> Compounding pharmacies are regulated by state boards of pharmacy</li>
          <li><strong>Quality:</strong> Sourced from 503A or 503B licensed facilities</li>
          <li><strong>Safety:</strong> Same active ingredients as brand-name medications</li>
          <li><strong>Cost:</strong> Typically 50-70% cheaper than brand-name options</li>
        </ul>
        <p>While compounded medications lack FDA approval, they follow strict pharmacy guidelines and use the same active ingredients (semaglutide or tirzepatide) as Wegovy, Ozempic, and Zepbound.</p>
      </>
    )}
    
    <h2>Red Flags to Watch For (None Found)</h2>
    <p>When evaluating any telehealth provider, watch for these warning signs. {provider.name} passes these safety checks:</p>
    <ul>
      <li>‚úÖ Requires medical consultation (not auto-approval)</li>
      <li>‚úÖ Uses licensed healthcare providers</li>
      <li>‚úÖ Sources medications from accredited pharmacies</li>
      <li>‚úÖ Has transparent pricing (${provider.monthlyPrice})</li>
      <li>‚úÖ Protects patient privacy (HIPAA compliant)</li>
      <li>‚úÖ Provides customer support</li>
    </ul>
    
    <h2>Common Concerns About {provider.name}</h2>
    
    <h3>"The price seems too good to be true"</h3>
    <p>{provider.name}'s pricing ({provider.monthlyPrice}) is competitive but not suspiciously low. {provider.compounded ? 'Compounded medications cost less than brand names because they skip marketing expenses.' : 'They work with insurance and manufacturer programs to reduce costs.'}</p>
    
    <h3>"I saw negative reviews"</h3>
    <p>Every telehealth provider has some negative reviews. Common complaints include:</p>
    <ul>
      <li>Delayed shipping or customer service responses</li>
      <li>Side effects (normal for GLP-1 medications)</li>
      <li>Billing or subscription issues</li>
    </ul>
    <p>With a {provider.trustpilotRating ? provider.trustpilotRating.toFixed(1) : '4.0'}+ rating, most {provider.name} customers report positive experiences. Read both positive and negative reviews to set realistic expectations.</p>
    
    <h3>"Will my insurance cover it?"</h3>
    <p>{provider.name} {provider.insurance ? 'accepts insurance for prescriptions and can help navigate coverage options' : 'operates on a cash-pay model, which means lower prices but no insurance billing'}. {provider.insuranceConcierge && 'They offer an insurance concierge service to help maximize your coverage.'}</p>
    
    <FAQSection faqs={faqs} />
    
    <h2>Final Verdict on {provider.name} Legitimacy</h2>
    <p>{provider.name} is a legitimate, safe telehealth provider for GLP-1 weight loss medications. They operate within legal regulations, use licensed providers, and have thousands of satisfied customers. As with any medical treatment, results and experiences vary‚Äîconsult with your healthcare provider to determine if {provider.name} is right for you.</p>
    
    <div style="text-align: center; margin-top: 48px;">
      {provider.affiliateLink && (
        <a href={provider.affiliateLink} target="_blank" rel="noopener" class="btn btn-primary" style="font-size: 1.1rem; padding: 16px 32px;">
          Get Started with {provider.name} ‚Üí
        </a>
      )}
    </div>
  </div>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MedicalWebPage",
    "name": "Is {provider.name} Legit? {new Date().getFullYear()} Safety Review",
    "datePublished": "{new Date().toISOString()}",
    "dateModified": "{new Date().toISOString()}",
    "reviewedBy": {
      "@type": "Organization",
      "name": "CompareWeightMeds Medical Team"
    }
  }
  </script>
  
  {provider.trustpilotRating && (
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "AggregateRating",
      "itemReviewed": {
        "@type": "MedicalBusiness",
        "name": "{provider.name}"
      },
      "ratingValue": "{provider.trustpilotRating}",
      "bestRating": "5",
      "worstRating": "1",
      "ratingCount": "{provider.trustpilotReviews}"
    }
    </script>
  )}
</BaseLayout>
