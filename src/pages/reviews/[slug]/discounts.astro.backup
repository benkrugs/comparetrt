---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import MedicalDisclaimer from '../../../components/MedicalDisclaimer.astro';
import FAQSection from '../../../components/FAQSection.astro';
import { providers } from '../../../data/providers';

export function getStaticPaths() {
  return providers.map(provider => ({
    params: { slug: provider.slug },
    props: { provider }
  }));
}

const { provider} = Astro.props;

// Discount data per provider
const discounts = {
  'sprout-health': {
    amount: 150,
    description: '$150 off your first month',
    code: 'SPROUT150',
    validThrough: '2026-12-31'
  },
  'medvi': {
    amount: 120,
    description: '$120 off your first month',
    code: 'MEDVI120',
    validThrough: '2026-12-31'
  }
};

const currentDiscount = discounts[provider.slug];

// Generate FAQs for discounts page
const faqs = [
  {
    question: `Does ${provider.name} offer discounts for new customers?`,
    answer: `${provider.name} pricing starts at ${provider.monthlyPrice}. Many telehealth providers offer introductory discounts for first-time customers. Check the official ${provider.name} website or use our affiliate link for current promotions.`
  },
  {
    question: `How can I save money on ${provider.name}?`,
    answer: `To save on ${provider.name}: 1) Look for first-month discounts, 2) Compare their pricing to competitors, 3) Check if they accept HSA/FSA payments, 4) Consider longer subscription plans if available, 5) Use affiliate discount codes when signing up.`
  },
  {
    question: `Does ${provider.name} have coupon codes?`,
    answer: `${provider.name} occasionally offers promotional codes for new customers. The best way to find current codes is to visit their official website or use verified affiliate links that may include special offers.`
  },
  {
    question: `Are there seasonal sales on ${provider.name}?`,
    answer: `Many GLP-1 telehealth providers, including ${provider.name}, may offer promotional pricing during major holidays or health awareness months. Sign up for their email list to be notified of special offers.`
  },
  {
    question: `Can I use insurance to reduce ${provider.name} costs?`,
    answer: `${provider.name} ${provider.insurance ? 'accepts insurance for prescriptions, which may significantly reduce your out-of-pocket costs' : 'operates on a cash-pay model and does not accept insurance'}. Contact them directly to discuss payment options.`
  }
];

const currentDate = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
---

<BaseLayout 
  title={`${provider.name} Discounts & Promo Codes ${new Date().getFullYear()} | Save on GLP-1`}
  description={`Find the latest ${provider.name} discounts, promo codes, and special offers. Learn how to save on ${provider.name} GLP-1 medications. Current pricing: ${provider.monthlyPrice}.`}
>
  <style>
    .article-header {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 60px 24px 40px;
    }
    
    .article-header-inner {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .article-header h1 {
      font-size: clamp(2rem, 4vw, 2.8rem);
      font-weight: 700;
      margin-bottom: 16px;
      line-height: 1.2;
    }
    
    .article-meta {
      font-size: 0.9rem;
      opacity: 0.9;
      margin-bottom: 24px;
    }
    
    .content {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 24px 80px;
    }
    
    .content h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 48px 0 16px;
    }
    
    .content h2:first-child {
      margin-top: 0;
    }
    
    .content h3 {
      font-size: 1.4rem;
      font-weight: 600;
      margin: 32px 0 12px;
    }
    
    .content p {
      font-size: 1.05rem;
      line-height: 1.7;
      color: var(--text-sec);
      margin-bottom: 20px;
    }
    
    .content ul, .content ol {
      margin: 20px 0;
      padding-left: 24px;
    }
    
    .content li {
      font-size: 1.05rem;
      line-height: 1.7;
      color: var(--text-sec);
      margin-bottom: 12px;
    }
    
    .pricing-box {
      background: var(--accent-light);
      border-left: 4px solid var(--accent);
      padding: 24px;
      border-radius: var(--r);
      margin: 32px 0;
    }
    
    .pricing-box h3 {
      color: var(--accent-dark);
      margin: 0 0 12px 0;
      font-size: 1.3rem;
    }
    
    .pricing-box p {
      margin: 0;
      font-size: 1.1rem;
    }
    
    .cta-box {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 32px;
      border-radius: var(--r);
      text-align: center;
      margin: 48px 0;
    }
    
    .cta-box h3 {
      color: white;
      margin: 0 0 16px 0;
      font-size: 1.5rem;
    }
    
    .cta-box p {
      color: white;
      opacity: 0.95;
      margin-bottom: 24px;
    }
  </style>

  <div class="article-header">
    <div class="article-header-inner">
      <h1>{provider.name} Discounts & Promo Codes {new Date().getFullYear()}</h1>
      <div class="article-meta">
        Last Updated: {currentDate} | Reviewed by CompareWeightMeds Medical Team
      </div>
      {provider.affiliateLink && (
        <a href={provider.affiliateLink} target="_blank" rel="noopener" class="btn btn-primary">
          Check Current {provider.name} Offers â†’
        </a>
      )}
    </div>
  </div>

  <div class="content">
    <MedicalDisclaimer />
    
    <h2>Current {provider.name} Pricing</h2>
    {currentDiscount ? (
      <div class="pricing-box" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left-color: #f59e0b;">
        <h3 style="color: #92400e;">ðŸ’° Exclusive Discount - ${currentDiscount.amount} OFF!</h3>
        <p style="color: #92400e;"><strong>Regular Price:</strong> <span style="text-decoration: line-through; opacity: 0.7;">{provider.monthlyPrice}</span></p>
        <p style="color: #059669; font-size: 1.3rem; font-weight: 700;">First Month: ${provider.slug === 'medvi' ? '59' : '49'} ({provider.slug === 'medvi' ? '67' : '75'}% OFF!)</p>
        <p style="color: #92400e;"><strong>Code:</strong> <span style="font-family: monospace; background: rgba(255,255,255,0.4); padding: 4px 8px; border-radius: 4px;">{currentDiscount.code}</span></p>
        <p style="color: #92400e;"><strong>Consultation Fee:</strong> {provider.consultationFee}</p>
        <p style="color: #92400e;"><strong>Membership Fee:</strong> {provider.membershipFee}</p>
      </div>
    ) : (
      <div class="pricing-box">
        <h3>ðŸ’° {provider.name} Costs</h3>
        <p><strong>Monthly Price:</strong> {provider.monthlyPrice}</p>
        <p><strong>Consultation Fee:</strong> {provider.consultationFee}</p>
        <p><strong>Membership Fee:</strong> {provider.membershipFee}</p>
      </div>
    )}
    
    <h2>How to Save Money on {provider.name}</h2>
    <p>{provider.name} is one of the leading GLP-1 telehealth providers offering {provider.compounded ? 'compounded' : 'brand-name'} medications for weight loss. Here are the best ways to reduce your costs:</p>
    
    <h3>1. Look for First-Time Customer Discounts</h3>
    <p>Many telehealth providers, including {provider.name}, offer special introductory pricing for new customers. These discounts can range from $50-$150 off your first month or multi-month subscriptions.</p>
    
    <h3>2. Use Affiliate Discount Links</h3>
    <p>Verified affiliate partners often have exclusive promo codes or special offers. When you use our affiliate links, you may get access to discounts not available on the main website.</p>
    
    <h3>3. Consider Multi-Month Plans</h3>
    <p>If {provider.name} offers subscription plans, committing to 3-6 months upfront often comes with a reduced monthly rate compared to month-to-month pricing.</p>
    
    <h3>4. Check HSA/FSA Eligibility</h3>
    <p>GLP-1 medications prescribed for medical weight loss may be eligible for Health Savings Account (HSA) or Flexible Spending Account (FSA) reimbursement. Check with your plan administrator.</p>
    
    <h3>5. Compare with Competitors</h3>
    <p>Shop around! Compare {provider.name} pricing with other providers like {providers.filter(p => p.slug !== provider.slug).slice(0, 3).map(p => p.name).join(', ')}. Prices can vary significantly.</p>
    
    {provider.moneyBackGuarantee && (
      <>
        <h2>Money-Back Guarantee</h2>
        <p>{provider.name} offers a money-back guarantee, which provides additional peace of mind when trying their service. Check their terms for specific conditions and timeframes.</p>
      </>
    )}
    
    <div class="cta-box">
      <h3>Ready to Save on {provider.name}?</h3>
      <p>Click below to check for current discounts and special offers</p>
      {provider.affiliateLink && (
        <a href={provider.affiliateLink} target="_blank" rel="noopener" class="btn btn-primary" style="background: white; color: var(--accent);">
          View {provider.name} Offers â†’
        </a>
      )}
    </div>
    
    <FAQSection faqs={faqs} />
    
    <h2>Transparency & Affiliate Disclosure</h2>
    <p>We may earn a commission when you purchase {provider.name} through our links, at no additional cost to you. This helps us maintain this free comparison service. All pricing information and reviews are independently researched and unbiased.</p>
  </div>

  <!-- Medical Web Page Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "MedicalWebPage",
    "name": "{provider.name} Discounts & Promo Codes {new Date().getFullYear()}",
    "description": "Find the latest {provider.name} discounts, promo codes, and special offers for GLP-1 medications.",
    "datePublished": "{new Date().toISOString()}",
    "dateModified": "{new Date().toISOString()}",
    "reviewedBy": {
      "@type": "Organization",
      "name": "CompareWeightMeds Medical Team"
    }
  }
  </script>
  
  <!-- Breadcrumb Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://compareweightmeds.com/"
    },{
      "@type": "ListItem",
      "position": 2,
      "name": "Reviews",
      "item": "https://compareweightmeds.com/reviews/"
    },{
      "@type": "ListItem",
      "position": 3,
      "name": "{provider.name}",
      "item": "https://compareweightmeds.com/reviews/{provider.slug}/"
    },{
      "@type": "ListItem",
      "position": 4,
      "name": "Discounts",
      "item": "https://compareweightmeds.com/reviews/{provider.slug}/discounts/"
    }]
  }
  </script>
</BaseLayout>
